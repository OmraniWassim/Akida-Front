<div class="signup-container">
    <div class="signup-card">
        <div class="signup-header">
            <img src="assets/layout/images/logo-dark.svg" alt="Logo" class="logo" />
            <h1>Créer un compte</h1>
            <p>Suivez les étapes pour créer votre compte</p>
        </div>

        <p-steps [model]="items" [(activeIndex)]="activeIndex" [readonly]="false"></p-steps>

        <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="signup-form">
            <!-- Étape 1: Informations personnelles -->
            <div *ngIf="activeIndex === 0">
                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="firstName" formControlName="firstName" />
                        <label for="firstName">Prénom</label>
                    </span>
                    <small class="p-error" *ngIf="signupForm.get('firstName')?.invalid && signupForm.get('firstName')?.touched">
                        Prénom requis
                    </small>
                </div>

                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="lastName" formControlName="lastName" />
                        <label for="lastName">Nom</label>
                    </span>
                    <small class="p-error" *ngIf="signupForm.get('lastName')?.invalid && signupForm.get('lastName')?.touched">
                        Nom requis
                    </small>
                </div>

                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="email" formControlName="email" />
                        <label for="email">Email</label>
                    </span>
                    <small class="p-error" *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched">
                        Email invalide
                    </small>
                </div>

                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="phone" formControlName="phone" />
                        <label for="phone">Téléphone</label>
                    </span>
                    <small class="p-error" *ngIf="signupForm.get('phone')?.invalid && signupForm.get('phone')?.touched">
                        Téléphone requis
                    </small>
                </div>
            </div>

            <!-- Étape 2: Informations de connexion -->
            <div *ngIf="activeIndex === 1">
                <div class="field">
                    <span class="p-float-label">
                        <input type="password" pInputText id="password" formControlName="password" />
                        <label for="password">Mot de passe</label>
                    </span>
                    <small class="p-error" *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched">
                        Mot de passe requis (minimum 6 caractères)
                    </small>
                </div>

                <div class="field">
                    <span class="p-float-label">
                        <input type="password" pInputText id="confirmPassword" formControlName="confirmPassword" />
                        <label for="confirmPassword">Confirmer le mot de passe</label>
                    </span>
                    <small class="p-error" *ngIf="signupForm.hasError('mismatch') && signupForm.get('confirmPassword')?.touched">
                        Les mots de passe ne correspondent pas
                    </small>
                </div>
            </div>

            <!-- Étape 3: Informations professionnelles -->
            <div *ngIf="activeIndex === 2">
                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="company" formControlName="company" />
                        <label for="company">Entreprise</label>
                    </span>
                </div>

                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="position" formControlName="position" />
                        <label for="position">Poste</label>
                    </span>
                </div>

                <div class="field">
                    <span class="p-float-label">
                        <input type="text" pInputText id="industry" formControlName="industry" />
                        <label for="industry">Secteur d'activité</label>
                    </span>
                </div>
            </div>

            <!-- Étape 4: Conditions -->
            <div *ngIf="activeIndex === 3">
                <div class="field-checkbox">
                    <p-checkbox [binary]="true" formControlName="terms" label="J'accepte les conditions d'utilisation"></p-checkbox>
                    <small class="p-error" *ngIf="signupForm.get('terms')?.invalid && signupForm.get('terms')?.touched">
                        Vous devez accepter les conditions
                    </small>
                </div>
            </div>

            <div class="form-actions">
                <button pButton type="button" label="Précédent" class="p-button-text" 
                        *ngIf="activeIndex > 0" (click)="prevStep()"></button>
                <button pButton type="button" label="Suivant" class="p-button-primary" 
                        *ngIf="activeIndex < 3" (click)="nextStep()"></button>
                <button pButton type="submit" label="S'inscrire" class="p-button-primary" 
                        *ngIf="activeIndex === 3" [loading]="loading"></button>
            </div>
        </form>

        <div class="signup-footer">
            <p>Vous avez déjà un compte ?</p>
            <button pButton label="Se connecter" class="p-button-text" (click)="goToLogin()"></button>
        </div>
    </div>
</div> 